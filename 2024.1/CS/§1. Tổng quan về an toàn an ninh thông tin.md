# 1. Khái niệm cơ bản trong AT-ANTT

• Bao gồm các khía cạnh: 
	• Chính sách 
	• Mô hình đe dọa 
	• Cơ chế AT-ANTT 
• Chính sách AT-ANTT(security policy): tuyên bố về các mục tiêu/yêu cầu AT-ANTT của hệ thống
	• Chủ thể 
	• Hành vi phải thực hiện/được phép/không được phép 
	• Tài nguyên

## Mục tiêu: Mô hình CIA

• Confidentiality (Bí mật): tài nguyên chỉ được tiếp cận bởi các bên được ủy quyền 
• Integrity (Toàn vẹn): tài nguyên chỉ được sửa đổi bởi các bên được ủy quyền 
• Availability (Sẵn sàng): tài nguyên sẵn sàng khi có yêu cầu 
	• Thời gian đáp ứng chấp nhận được 
	• Tài nguyên được định vị trí rõ ràng 
	• Khả năng chịu lỗi 
	• Dễ dàng sử dụng 
	• Đồng bộ khi đáp ứng yêu cầu

## Mục tiêu: Mô hình AAA

• Assurance (Đảm bảo): hệ thống cung cấp sự tin cậy và quản trị được sự tin cậy 
	• Ví dụ: tính tin cậy trong hệ thống thanh toán trực tuyến 
• Bao gồm khía cạnh kỹ thuật phần mềm: Làm thế nào chắc chắn rằng mã nguồn phần mềm được viết theo đúng thiết kế? 
• Authenticity (Xác thực): khẳng định được danh tính của chủ thể trong hệ thống 
• Anonymity (Ẩn danh): che giấu được thông tin cá nhân của chủ thể

## Cơ chế AT-ANTT

• Là các kỹ thuật, thủ tục để thi hành và đảm bảo chính sách AT-ANTT được thi hành 
• Phân loại: 
	• Ngăn chặn (Prevention): ngăn chặn chính sách bị xâm phạm 
	• Phát hiện (Detection) và Ứng phó(Response): phát hiện chính sách bị xâm phạm 
		• False positive rate: Tỉ lệ cảnh báo sai 
		• False negative rate: Tỉ lệ bỏ sót tấn công 
• Cần phát hiện những dạng xâm phạm không thể ngăn chặn

### Một số cơ chế AT-ANTT(tiếp) 

**• Bảo vệ vật lý (Physical protection)** 
**• Mật mã học (Cryptography)** 
**• Định danh (Identification)**
**• Xác thực (Authentication)** 
**• Ủy quyền (Authorization)** 
**• Nhật ký (Logging)** 
**• Kiểm toán(Auditting)** 
**• Sao lưu và khôi phục (Backup and Recovery)** 
**• Dự phòng (Redundancy)** 
**• Giả lập, ngụy trang (Deception)** 
**• Gây nhiễu, ngẫu nhiên(randomness)**

## Mô hình đe dọa 

• Threat Model: mô tả những mối đe dọa kẻ tấn công có thể gây ra cho hệ thống và hậu quả
	• Cái gì cần bảo vệ? 
	• Ai có thể tấn công vào hệ thống? Chúng có gì? 
	• Hệ thống có thể bị tấn công như thế nào? 
• Độ rủi ro (Risk): khả năng xảy ra các sự cố làm mất an toàn an ninh thông tin và thiệt hại của chúng cho hệ thống 
• Lỗ hổng (Vulnerability): là những điểm yếu trong hệ thống có thể bị khai thác, lợi dụng để gây tổn hại cho hệ thống 
	• https://www.cvedetails.com/ 
	• Tầm soát lỗ hổng định kỳ là một trong những giải pháp phòng chống tấn công

## Phân loại tấn công 

• Tấn công thụ động(passive attack) và tấn công chủ động(active attack) 
	• Tấn công thụ động: không can thiệp, làm thay đổi hoạt động của hệ thống 
	• Tấn công chủ động: can thiệp, làm thay đổi hoạt động của hệ thống 
• Tấn công có chủ đích(targeted attack/APT attack) và tấn công không có chủ đích(non-targeted attack) 
	• Tấn công có chủ đích: mục tiêu đã xác định 
	• Tấn công không có chủ đích: mục tiêu bất kỳ • Tấn công bên trong và tấn công bên ngoài

# 3. Xây dựng hệ thống AT-ANTT

## Quy trình xây dựng
4 giai đoạn: 
	- Phân tích yêu cầu 
	- Thiết kế 
	- Triển khai 
	- Kiểm thử và bảo trì

- Các giai đoạn được thực hiện tuần tự 
- Luôn có sự phản hồi của giai đoạn sau tới giai đoạn trước 
- Chia để trị


• Xây dựng chính sách: có thể mô tả ban đầu bằng ngôn ngữ tự nhiên: 
	• Hành vi phải thực hiện/được phép/ không được phép 
	• Chủ thể của hành vi 
	• Đối tượng hành vi tác động tới 
	• Điều kiện 
• Xây dựng các tình huống lạm quyền minh họa cho sự xâm phạm chính sách
• Chính sách AT-ANTT phải phù hợp với quy định luật pháp


## Xây dựng mô hình đe dọa(Threat model): 
1. Xác định, phân vùng tài nguyên cần bảo vệ 
2. Xác định các luồng dữ liệu, hành vi tương tác tới tài nguyên 
3. Phân tích các hoạt động diễn ra trên tài nguyên 
4. Xác định các mối đe dọa có thể có, phân loại và đánh giá 
5. Xác định các lỗ hổng liên quan 
Mô hình đe dọa tồi(bad model) --> Giải pháp ATANTT tồi (bad security)



## Quy trình xây dựng
• Thiết kế các thành phần theo mô hình nguy cơ: lựa chọn cơ chế AT-ANTT
	• Ngăn chặn: Loại bỏ hoàn toàn nguy cơ 
	• Giảm thiểu 
	• Chấp nhận nguy cơ 
	• Chuyển nhượng rủi ro 
• Triển khai 
	• Chú ý: đào tạo người dùng 
• Vận hành và bảo trì:
	• Chú ý: cần liên tục giám sát hệ thống


## Một số nguyên tắc

• AT-ANTT là bài toán kinh tế(Security is Economics): để tăng mức độ an toàn phải tăng chi phí
	• Giá trị tài nguyên cần bảo vệ/ Chi phí để bảo vệ 
	• Mức tổn thương mà tấn công gây ra / Chi phí để chống lại các kỹ thuật tấn công 
	• Chi phí thực thi tấn công / Giá trị thu lại 
--> Xây dựng hệ thống là an toàn nhất trong các điều kiện ràng buộc 
--> KISS: Keep It Simple, Sir! 
--> Complexity is the enemy

• Tối thiểu hóa quyền (Least privilege ): không cấp quyền nhiều hơn những gì mà đối tượng cần để hoàn thành nhiệm vụ
				![[Pasted image 20241025005406.png|400]]
				

• Phân chia quyền (Privilege separation) 
	• Phân chia hệ thống sao cho các thành phần được cấp quyền nhỏ nhất có thể.

• Chia sẻ trách nhiệm(Separation of responsibility)
	• Quyền chỉ được thực thi khi có yêu cầu đồng thời từ nhiều bên

• Chia sẻ tối thiểu(Least common mechanism): Tài nguyên cần được chia sẻ tới ít bên nhất có thể
• Dễ hiểu, dễ sử dụng cho người dùng(Usable): 
	• Người dùng sẽ tuân thủ cơ chế an toàn bảo mật hay quyết định phá vỡ nó? 
	• Nếu bạn không làm hệ thống dễ sử dụng và an toàn thì người dùng sẽ làm cho nó dễ sử dụng và không an toàn.
--> KISS: Keep It Simple, Sir! 
--> Complexity is the enemy

• Mặc định an toàn (Fail-safe default): nếu có ngoại lệ xảy ra, hệ thống cần xử lý mặc định sao cho đầu ra là an toàn
	• Sử dụng danh sách trắng(white list) thay vì danh sách đen (black list) 
	• Sử dụng cơ chế mặc định từ chối (default-deny policies) 
	• Khi một đối tượng được khởi tạo, mặc định quyền truy cập của nó là rỗng 
	• Sao lưu (backup) 
	• …


• Kiểm soát tất cả truy cập(Complete mediation)
	• Time Of Check To Time Of Use: TOCTTOU 
		• Lỗ hổng tranh đua điều kiện (Race Condition)
		
• Bảo vệ theo chiều sâu (Defense in depth): tạo ra nhiều lớp bảo vệ khác nhau cho tài nguyên 
• Kẻ tấn công cần phải phá vỡ tất cả các lớp bảo vệ 
• Tuy nhiên, sẽ làm gia tăng chi phí và ảnh hưởng tới hiệu năng của hệ thống

• An toàn của hệ thống đặt tại mắt xích yếu nhất (weakest link) 
• Thiết kế mở(Open Design): Không phụ thuộc vào các giải pháp an toàn bảo mật dựa trên việc che giấu mọi thứ (“security through obsecurity”) 
	• Shannon's Maxim: "The Enemy Knows the Syste

• Security is process, not service 
• AT-ANTT là quá trình, không phải dịch vụ 
	• Thiết kế AT-ANTT ngay từ đầu
## 4. Cơ sở tính toán được tin cậy (Trusted Computing Base)

Trusted Computing Base(TCB) 
• TCB: Là một tập con của hệ thống, bao gồm phần cứng, phần mềm, mà hệ thống dựa vào nó để đạt được các mục tiêu AT-ANTT
	• Các thành phần của TCB luôn tuân thủ chính sách ATANTT của hệ thống 
• TCB được xây dựng để đảm bảo chính sách ATANTT được giữ vững ngay cả khi các thành phần ngoài TCB xâm phạm chính sách 
--> TCB phải đủ lớn để không có thành phần nào ngoài nó có thể xâm phạm AT-ANTT của hệ thống
• Trusted Path: là một kênh truyền thông mà các thành phần trên kênh đó có thể tin cậy lẫn nhau


TCB – Ví dụ 
• Giả sử mục tiêu AT-ANTT là những người dùng được cấp quyền có thể sử dụng Teamviewer để điều khiển máy tính từ xa. 
• TCB có thể gồm những gì?

Trusting trust? 
• “Reflections on Trusting Trust” – Ken. Thompson 
• Nếu tin tưởng vào các chương trình thực thi? 
	• Ví dụ: #login 
	• RedHat có đáng tin không? 
	Mật khẩu của người dùng có gửi đi đâu không? 
• Nếu không tin tưởng 
	• Kiểm tra mã nguồn hoặc tự viết lại mã nguồn 
	• Vấn đề đã được giải quyết? 
• Chúng ta tin cậy vào cái gì? 
• Có thể lấy rất nhiều ví dụ khác...


TCB 
• Thiết kế AT-ANTT cho hệ thống luôn phải chỉ ra được các thành phần trong TCB 
• Yêu cầu với TCB: 
	• Không thể vòng tránh(unbypassable) 
	• Chống sửa đổi (Tamper-resistant) 
	• Có thể thẩm tra (Verifiable) 
--> Thiết kế TCB sao cho đơn giản là rất quan trọng 
	• Simple = Small

TCB – Ví dụ 
• TPM (Trusted Platform Module) 
• Apple Secure Enclave Processor 
• Qualcomm Trusted Execution Environment 
• Samsung TEEGRIS
• Huawei TrustedCore